window.STB_Admin=function(a){"use strict";function b(){h.find(".stb-trigger-options").toggle(""!==this.value)}function c(){a(this).parents("tr").remove()}function d(){var b=a(this).parents("tr"),c=b.find(".stb-rule-value");switch(i.hide(),c.show(),this.value){case"":default:c.attr("placeholder","Leave empty to match anything or enter a comma-separated list of IDs or slugs");break;case"everywhere":c.hide();break;case"is_single":c.attr("placeholder","Leave empty to match any post or enter a comma-separated list of post IDs or slugs");break;case"is_page":c.attr("placeholder","Leave empty to match any page or enter a comma-separated list of page IDs or slugs");break;case"is_post_type":c.attr("placeholder","Leave empty to match any post type or enter a comma-separated list of post type names");break;case"manual":c.attr("placeholder","Example: is_single(1, 3)"),i.show()}}function e(){var a=h.find(".stb-rule-row").last(),b=a.clone();return b.find("th > label").text("Or"),b.insertAfter(a).find(":input").val("").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(a,b){return"["+(parseInt(b,10)+1)+"]"})}).trigger("change"),!1}function f(b){"string"==typeof b&&(b=document.getElementById("stb-"+b)),this._element=b,this.getColorValue=function(){return this._element.value.length>0?a(this._element).hasClass("wp-color-field")?a(this._element).wpColorPicker("color"):this._element.value:""},this.getPxValue=function(a){return this._element.value.length>0?parseInt(this._element.value)+"px":a||""},this.getValue=function(a){return this._element.value.length>0?this._element.value:a||""},this.clear=function(){this._element.value=""},this.setValue=function(a){this._element.value=a}}var g=a("#stb-box-appearance-controls"),h=a("#stb-box-options-controls"),i=h.find(".stb-manual-tip");h.on("click",".stb-add-rule",e),h.on("click",".stb-remove-rule",c),h.on("change",".stb-rule-condition",d),h.find(".stb-auto-show-trigger").on("change",b),a(window).load(function(){"undefined"==typeof window.tinyMCE&&(document.getElementById("notice-notinymce").style.display="block")});var j=function(){function b(){h=a("#content_ifr"),e=h.contents().find("html"),e.css({background:"white"}),i=e.find("#tinymce"),i.addClass("scroll-triggered-box stb stb-"+k),i.css({margin:0,background:"white",display:"inline-block",width:"auto","min-width":"240px",position:"relative"}),i.get(0).style.cssText+=";padding: 25px !important;",j=document.createElement("style"),j.setAttribute("type","text/css"),j.id="stb-manual-css",a(j).appendTo(e.find("head")),c(),a(document).trigger("editorInit.stb")}function c(){j.innerHTML=l.manualCSS.getValue(),i.css({"border-color":l.borderColor.getColorValue(),"border-width":l.borderWidth.getPxValue(),"border-style":l.borderStyle.getValue(),"background-color":l.backgroundColor.getColorValue(),width:l.width.getPxValue(),color:l.color.getColorValue()}),a(document).trigger("applyBoxStyles.stb")}function d(){for(var b in l)"theme"!==b.substring(0,5)&&l[b].clear();c(),a(document).trigger("resetBoxStyles.stb")}var e,h,i,j,k=document.getElementById("post_ID").value||0,l={};return l.borderColor=new f("border-color"),l.borderWidth=new f("border-width"),l.borderStyle=new f("border-style"),l.backgroundColor=new f("background-color"),l.width=new f("width"),l.color=new f("color"),l.manualCSS=new f("manual-css"),g.find("input.stb-color-field").wpColorPicker({change:c,clear:c}),g.find(":input").not(".stb-color-field").change(c),{init:b,resetStyles:d,options:l}}();return{Designer:j,Option:f}}(window.jQuery);